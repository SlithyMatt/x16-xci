# XCI Level Template

# Uncomment below when/if you have level bitmap and/or music
bitmap store.data
#music music.vgm
sound close close.raw
sound drop drop.raw
sound open open.raw

init
text 1 We're here!
end_anim

first
# Put first-time-only animation here
text 1 Buy something, will ya?
tiles 0 5 5  20 21
tiles 0 5 6  22 23
sprite_frames 1 0  5 # grail (init)
sprite 1  96 40
sprite_frames 2 2  11 # mask
sprite 2  247 127
sprite_frames 3 0  5 # grail (return)
sprite_frames 4 2  9 # left cover
sprite 4  239 118
sprite_frames 5 2  9H # right cover
sprite 5  255 118
sprite_frames 6 2  10 # hole
sprite 6  247 123
end_anim

# Put triggers here
tool_trigger use  5 5  6 6
text 1 Bananas are 3 for $1
end_anim

tool_trigger use  12 5  13 6
if_not got_grail
   text 1 Grails are one easy payment of $9,999.
end_if
end_anim

item_trigger money 1 1  5 5  6 6
text 1 Enjoy your bananas!
get_item banana 3
end_anim

item_trigger money 9999 9999 12 5  13 6
if_not got_grail
   get_item grail 1
   set_state got_grail
   sprite_hide 1
   text 1 You got the grail!
end_if
end_anim

tool_trigger use  28 24  34 24
clear
text 1 It's a plaque that reads
text 2 "Place Grail Here to Win"
end_anim

item_trigger grail 1 1  30 13  32 16
sprite 3  247 112
wait 60
play open
sprite_move 4  2 8  -1 0
sprite_move 5  2 8  1 0
wait 15
sprite_move 3  2 16 0 1
wait 40
play drop
wait 30
play close
sprite_move 4  4 8  1 0
sprite_move 5  4 8  -1 0
wait 60
go_level 0 2
end_anim
