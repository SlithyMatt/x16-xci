# Zone 0, level 1
# Zone 0, level 1

bitmap mygame_kitchen.data
music zone0.vgm

init
# coffee maker
tiles 0  18 10  161 162
tiles 0  18 11  163 164
tiles 0  18 12  165 166
# steam loop
sprite_frames 2  0  43 44 45 46

first
# coffee cup
tiles 0  20 11  169
tiles 0  20 12  170
# bananas
tiles 0  35 11  171 172
tiles 0  35 12  173 174
wait 30
text 1  This is my kitchen. So modern!
wait 60
text 1  I am here, right behind you.
wait 120
text 1  Don't turn around!
wait 60
text 1  Just tell me what to do.

# clicking on the coffee maker with use tool (default)
tool_trigger use  18 10  19 12
if coffee_made
if holding_carafe
clear
text 1  Let's not make more coffee with this
text 1  fresh coffee. Perc sucks.
wait 60
text 1  Find a cup
end_if # holding_carafe
if_not holding_carafe
clear
text 1  Yes, nice fresh coffee.
wait 60
text 1  Let's find a good cup to pour it into
set_state holding_carafe
end_if # not holding_carafe
end_if # coffee_made
if_not coffee_made
clear
text 1  Ok, I'll make some coffee
wait 60
# show steam
sprite 2  148 70
sprite_move 2  12  150  0 0 # fixed position, 5 fps, 30 s
wait 120
# fill carafe
tiles 0  18 11  167 168
text 1  Done! Smells good...
set_state coffee_made
end_if # not coffee_made
end_trigger # use coffee maker

# clicking on the coffee maker with look tool
tool_trigger use  18 10  19 12
if_not coffee_made
clear
text 1  That's my coffee maker.
wait 60
text 1  Need a little pick-me-up?
end_if
if coffee_made
clear
text 1  The coffee's still done.
wait 60
text 1  Gonna pour it?
end_if
end_trigger # look at coffee maker

# clicking on the coffee maker with money
item_trigger money  1  0  18 10  19 12
clear
text 1  It's my coffee maker.
wait 60
text 1  You can have a cup for free.
end_trigger

# clicking on the coffee cup with use tool (default)
tool_trigger use  20 11  20 12
if_not cup_taken
if_not holding_carafe
if_not coffee_poured
clear
text 1  It's an empty cup.
wait 60
text 1  You don't need one of those.
wait 60
text 1  Maybe you should fill it.
end_if # not coffee_poured
if coffee_poured
clear
text 1  Go ahead, take it with you.
sprite_hide 2 # no more steam
# remove cup
tiles 0  20 11  0
tiles 0  20 12  0
get_item coffee 1 # add 1 coffee to inventory
clear_state coffee_poured
set_state cup_taken
end_if # coffee_poured
end_if # not holding_carafe
if holding_carafe
clear
text 1  Sure, pour the whole pot.
wait 60
# empty carafe
tiles 0  18 11  163 164
clear_state holding_carafe
set_state coffee_poured
# move steam to over cup
sprite 2  156 78
sprite_move 2  12  150  0 0 # fixed position, 5 fps, 30 s
end_if # holding_carafe
end_if # not cup_taken
end_trigger # use coffee cup

# clicking on the coffee cup with look tool
tool_trigger look  20 11  20 12
if_not cup_taken
clear
text 1  That's a coffee cup.
if coffee_poured
wait 60
text 1  Maybe you should take it.
end_if # coffee_poured
if_not coffee_poured
wait 60
text 1 Conveniently placed, you think?
end_if # not coffee_poured
end_if # not cup_taken
end_trigger # look at coffee cup

# clicking on the bananas with use tool (default)
tool_trigger use  35 11  36 12
if_not bananas_taken
clear
text 2  Go ahead and take the bananas. # make it yellow, because bananas
wait 60
# remove bananas
tiles 0  35 11  0 0
tiles 0  35 12  0 0
get_item banana 3 # add 3 bananas to inventory
set_state bananas_taken
text 1  You may get hungry later.
end_if # not bananas_taken
end_trigger # use bananas

# clicking on the bananas with look tool
tool_trigger look  35 11  36 12
if_not bananas_taken
clear
text 2  Those are my bananas. # make it yellow, because bananas
wait 60
text 1  You should take them in case
text 1  you get hungry.
end_if # not bananas_taken
end_trigger # look at bananas

# clicking on the doorway with walk tool (default)
tool_trigger walk  2 6  6 23
clear
if_not cup_taken
text 1  You look tired. Have some coffee.
end_if
if_not bananas_taken
text 1  You'll get hungry later.
wait 60
text 1  Take my bananas.
end_if
if cup_taken
if bananas_taken
go_level 1 0 # go to zone 1, level 0
end_if # bananas_taken
end_if # cup_taken
end_trigger # walk to doorway

# clicking on the doorway with run tool
tool_trigger run  2 6  6 23
clear
text 1  NO RUNNING IN THE KITCHEN!
end_trigger # run to doorway

# clicking on the doorway with look tool
tool_trigger look  2 6  6 23
clear
text 1  That's the doorway to the
text 1  living room.
end_trigger # run to doorway
